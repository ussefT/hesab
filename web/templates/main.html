{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}"/>
    <title>{% block title %}Main{% endblock %}</title>
</head>
<body>
    <div id="wrapper">
        <!-- Header -->
        <header id="main-header">
            <nav class="nav-bar">
                {% if user.is_authenticated %}
                    <a href="{% url 'submit_expense' %}" class="nav-link">Expense</a>
                    <a href="{% url 'submit_income' %}" class="nav-link">Income</a>

                    <a href="{% url 'result' %}" class="nav-link">Result</a>
                    
                    <!-- Profile Dropdown -->
                    <div class="profile-dropdown">
                        <div class="profile-trigger">
                            <span class="profile-name">{{ user.first_name|default:user.username }}</span>
                            <span class="profile-icon">â–¼</span>
                        </div>
                        <div class="profile-menu">
                            <div class="profile-header">
                                <h4>{{ user.get_full_name|default:user.username }}</h4>
                                <p>{{ user.email }}</p>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <a href="{% url 'login' %}" class="nav-link">Login</a>
                    <a href="{% url 'register' %}" class="nav-link">Register</a>
                {% endif %}
            </nav>
        </header>

        <!-- Main Content -->
        <main id="main-content">
            {% block content %}{% endblock %}
        </main>

        <!-- Footer -->
        <footer id="main-footer">
            <p>&copy; {{ now|date:"Y" }} My Hesab App</p>
        </footer>
    </div>

    <script>
        // Profile dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            const profileTrigger = document.querySelector('.profile-trigger');
            const profileMenu = document.querySelector('.profile-menu');
            
            if (profileTrigger && profileMenu) {
                profileTrigger.addEventListener('click', function(e) {
                    e.stopPropagation();
                    profileMenu.classList.toggle('show');
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', function() {
                    profileMenu.classList.remove('show');
                });
                
                // Prevent closing when clicking inside dropdown
                profileMenu.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
        });
    </script>
</body>
</html>